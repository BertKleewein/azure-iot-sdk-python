INFO:patch_mbedtls:Patching paho and azure.iot.device  to use mbed_tls
INFO:patch_mbedtls:Creating SSLContextWrapper for protocol TLSVersion.TLSv1_2
INFO:patch_mbedtls:Wrapping socket for bertk-edge.azure-devices.net
DEBUG:paho:Sending CONNECT (u1, p1, wr0, wq0, wf0, c0, k60) client_id=b'bertk-hp_WET_335_test_device'
DEBUG:paho:Sending DISCONNECT
do_handshake
timeout=60.0
calling
send buffer_size = 445
send 501 bytes
send 501 bytes returned 501
calling recv 1 bytes
recv 1 bytes returned 1 bytes: 17
calling recv 1 bytes
recv 1 bytes returned 1 bytes: 03
calling recv 1 bytes
recv 1 bytes returned 1 bytes: 03
calling recv 1 bytes
recv 1 bytes returned 1 bytes: 00
calling recv 1 bytes
recv 1 bytes returned 1 bytes: 40
calling recv 1 bytes
recv 1 bytes returned 1 bytes: 54
calling recv 1 bytes
recv 1 bytes returned 1 bytes: 51
calling recv 1 bytes
recv 1 bytes returned 1 bytes: 20
calling recv 1 bytes
recv 1 bytes returned 1 bytes: 85
calling recv 1 bytes
recv 1 bytes returned 1 bytes: e1
calling recv 1 bytes
recv 1 bytes returned 1 bytes: ee
calling recv 1 bytes
recv 1 bytes returned 1 bytes: 83
calling recv 1 bytes
recv 1 bytes returned 1 bytes: e7
calling recv 1 bytes
recv 1 bytes returned 1 bytes: 53
calling recv 1 bytes
recv 1 bytes returned 1 bytes: 51
calling recv 1 bytes
recv 1 bytes returned 1 bytes: 8e
calling recv 1 bytes
recv 1 bytes returned 1 bytes: 8b
calling recv 1 bytes
recv 1 bytes returned 1 bytes: 5e
calling recv 1 bytes
recv 1 bytes returned 1 bytes: 14
calling recv 1 bytes
recv 1 bytes returned 1 bytes: 2d
calling recv 1 bytes
recv 1 bytes returned 1 bytes: 1f
calling recv 1 bytes
recv 1 bytes returned 1 bytes: 66
calling recv 1 bytes
recv 1 bytes returned 1 bytes: 00
calling recv 1 bytes
recv 1 bytes returned 1 bytes: da
calling recv 1 bytes
recv 1 bytes returned 1 bytes: 65
calling recv 1 bytes
recv 1 bytes returned 1 bytes: d1
calling recv 1 bytes
recv 1 bytes returned 1 bytes: 9c
calling recv 1 bytes
recv 1 bytes returned 1 bytes: e0
calling recv 1 bytes
recv 1 bytes returned 1 bytes: ae
calling recv 1 bytes
recv 1 bytes returned 1 bytes: 29
calling recv 1 bytes
recv 1 bytes returned 1 bytes: 75
calling recv 1 bytes
recv 1 bytes returned 1 bytes: 79
calling recv 1 bytes
recv 1 bytes returned 1 bytes: c2
calling recv 1 bytes
recv 1 bytes returned 1 bytes: 32
calling recv 1 bytes
recv 1 bytes returned 1 bytes: 6b
calling recv 1 bytes
recv 1 bytes returned 1 bytes: 68
calling recv 1 bytes
recv 1 bytes returned 1 bytes: 87
calling recv 1 bytes
recv 1 bytes returned 1 bytes: c1
calling recv 1 bytes
recv 1 bytes returned 1 bytes: 56
calling recv 1 bytes
recv 1 bytes returned 1 bytes: 42
calling recv 1 bytes
recv 1 bytes returned 1 bytes: 99
calling recv 1 bytes
recv 1 bytes returned 1 bytes: 51
calling recv 1 bytes
recv 1 bytes returned 1 bytes: a3
calling recv 1 bytes
recv 1 bytes returned 1 bytes: f7
calling recv 1 bytes
recv 1 bytes returned 1 bytes: 5c
calling recv 1 bytes
recv 1 bytes returned 1 bytes: de
calling recv 1 bytes
recv 1 bytes returned 1 bytes: 3b
calling recv 1 bytes
recv 1 bytes returned 1 bytes: a4
calling recv 1 bytes
recv 1 bytes returned 1 bytes: 44
calling recv 1 bytes
recv 1 bytes returned 1 bytes: 99
calling recv 1 bytes
recv 1 bytes returned 1 bytes: 39
calling recv 1 bytes
recv 1 bytes returned 1 bytes: 8d
calling recv 1 bytes
recv 1 bytes returned 1 bytes: 6c
calling recv 1 bytes
recv 1 bytes returned 1 bytes: e3
calling recv 1 bytes
recv 1 bytes returned 1 bytes: f6
calling recv 1 bytes
recv 1 bytes returned 1 bytes: b7
calling recv 1 bytes
recv 1 bytes returned 1 bytes: e5
calling recv 1 bytes
recv 1 bytes returned 1 bytes: d8
calling recv 1 bytes
recv 1 bytes returned 1 bytes: 41
calling recv 1 bytes
recv 1 bytes returned 1 bytes: c2
calling recv 1 bytes
recv 1 bytes returned 1 bytes: b0
calling recv 1 bytes
recv 1 bytes returned 1 bytes: c0
calling recv 1 bytes
recv 1 bytes returned 1 bytes: 3c
calling recv 1 bytes
recv 1 bytes returned 1 bytes: 2d
calling recv 1 bytes
recv 1 bytes returned 1 bytes: 3f
calling recv 1 bytes
recv 1 bytes returned 1 bytes: 83
calling recv 1 bytes
recv 1 bytes returned 1 bytes: 29
calling recv 1 bytes
recv 1 bytes returned 1 bytes: 3b
calling recv 1 bytes
recv 1 bytes returned 1 bytes: 75
calling recv 1 bytes
Traceback (most recent call last):
  File "send_message.py", line 26, in <module>
    device_client.connect()
  File "/home/bertk/repos/python/azure-iot-device/azure/iot/device/patch_documentation.py", line 14, in connect
    return super(IoTHubDeviceClient, self).connect()
  File "/home/bertk/repos/python/azure-iot-device/azure/iot/device/iothub/sync_clients.py", line 152, in connect
    handle_result(callback)
  File "/home/bertk/repos/python/azure-iot-device/azure/iot/device/iothub/sync_clients.py", line 34, in handle_result
    return callback.wait_for_completion()
  File "/home/bertk/repos/python/azure-iot-device/azure/iot/device/common/evented_callback.py", line 67, in wait_for_completion
    self.completion_event.wait(*args, **kwargs)
  File "/home/bertk/.pyenv/versions/3.7.1/lib/python3.7/threading.py", line 552, in wait
    signaled = self._cond.wait(timeout)
  File "/home/bertk/.pyenv/versions/3.7.1/lib/python3.7/threading.py", line 296, in wait
    waiter.acquire()
KeyboardInterrupt
Error in atexit._run_exitfuncs:
Traceback (most recent call last):
  File "/home/bertk/.pyenv/versions/3.7.1/lib/python3.7/concurrent/futures/thread.py", line 40, in _python_exit
    t.join()
  File "/home/bertk/.pyenv/versions/3.7.1/lib/python3.7/threading.py", line 1032, in join
    self._wait_for_tstate_lock()
  File "/home/bertk/.pyenv/versions/3.7.1/lib/python3.7/threading.py", line 1048, in _wait_for_tstate_lock
    elif lock.acquire(block, timeout):
KeyboardInterrupt
